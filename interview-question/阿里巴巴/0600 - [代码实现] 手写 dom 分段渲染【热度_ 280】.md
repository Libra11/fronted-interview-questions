# [代码实现] 手写 dom 分段渲染【热度: 280】

- Issue: #600
- State: open
- Labels: 阿里巴巴, 代码实现/算法
- Author: yanlele
- URL: https://github.com/pro-collection/interview-question/issues/600
- Created: 2023-10-21T14:05:34Z
- Updated: 2023-10-21T14:06:42Z

## Body

**关键词**：dom 分段渲染

分时函数案例：把1秒创建1000个DOM节点，改成每隔200毫秒创建10个节点，这样不用短时间在页面中创建大量的DOM。

```jsx
var timeChunk = function(arr,fn,count,interval) {
  var timer = null;
  var data = null;
  var start = function() {
    for(var i = 0 ; i < Math.min(count || 1 , arr.length) ; i++) {
      fn(arr.shift());
    }
  }
  return function() {
    timer = setInterval(function(){
      if(arr.length == 0) {
        clearInterval(timer);
        timer = null;
        return;
      }
      start();
    }, interval || 200)
  }
}

var arr = [];
for(var i = 0 ; i < 1000 ; i++) {
  arr.push(i);
}

var renderDOMList = timeChunk(arr, function(data) {
  var div = document.createElement('div');
  div.innerHTML = data;
  document.body.appendChild(div);
},10,200);
renderDOMList();
```

