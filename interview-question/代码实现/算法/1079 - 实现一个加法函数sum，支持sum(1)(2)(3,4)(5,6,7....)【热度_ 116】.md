# 实现一个加法函数sum，支持sum(1)(2)(3,4)(5,6,7....)【热度: 116】

- Issue: #1079
- State: open
- Labels: 代码实现/算法
- Author: yanlele
- URL: https://github.com/pro-collection/interview-question/issues/1079
- Created: 2024-12-15T11:15:36Z
- Updated: 2025-02-22T02:55:03Z

## Body

**关键词**：sum 函数实现

举例：

```js
console.log(sum(1,2,3)(4)) => 输出 10
```

以下是使用 JavaScript 实现满足要求的`sum`函数的代码：

```javascript
function sum(...args) {
  let total = 0;
  for (let arg of args) {
    if (Array.isArray(arg)) {
      for (let num of arg) {
        total += num;
      }
    } else {
      total += arg;
    }
  }

  function innerSum(...innerArgs) {
    for (let innerArg of innerArgs) {
      if (Array.isArray(innerArg)) {
        for (let num of innerArg) {
          total += num;
        }
      } else {
        total += innerArg;
      }
    }
    return innerSum;
  }

  innerSum.toString = function () {
    return total;
  };

  return innerSum;
}
```

在上述代码中：

1. 首先定义了外部的`sum`函数，它接受任意数量的参数（可以是单个数字或数字数组），并将这些参数的值累加到`total`变量中。
2. 然后在`sum`函数内部定义了一个名为`innerSum`的内部函数，它同样接受任意数量的参数，并将这些参数的值累加到`total`变量中。每次调用`innerSum`都会继续累加新传入的参数值。
3. 最后，为`innerSum`函数添加了一个`toString`方法，当在`console.log`等需要将函数转换为字符串的场景下，会返回累加得到的`total`值，这样就能得到正确的输出结果。

例如：

```javascript
console.log(sum(1, 2, 3)(4));
// 输出 10

console.log(sum(1)(2)(3, 4)(5, 6, 7));
// 输出 28
```


## Comments / Answers

---

**clshong** at 2024-12-18T13:54:42Z

调用函数时候需要增加toString()  不然是链式innerSum方法了
console.log(sum(1)(2)(3, 4)(5, 6, 7).toString());
// 输出 28


---

**clshong** at 2024-12-18T13:56:43Z

看这道题时候，思考为何不用柯里化去实现。
问题：柯里化函数和链式调用函数的区别？

---

**ryanli7426** at 2025-02-12T09:46:29Z

> 看这道题时候，思考为何不用柯里化去实现。 问题：柯里化函数和链式调用函数的区别？

不用柯里化，柯里化每次接收一个参数，而链式可以接受多个参数吧。（多个参数指一次调用传递多个参数）。
两者最大区别也是在传递参数上面

---

**BruceYuj** at 2025-02-22T02:55:02Z

题目出的有点问题。从例子来看，期望通过添加 `toString` 方法来改变 console.log() 的默认行为是不靠谱的。
1. console.log 是宿主环境的原生实现。其行为是不可控的。可能绕过或忽略 toString/valueOf/Symbol.toPrimitive 

