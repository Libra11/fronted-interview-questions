# 为什么小程序里拿不到dom相关的api

小程序为了追求更高的性能和更好的安全性，采用了类Webview的渲染方案，并使用了自己的渲染引擎，与浏览器的渲染引擎不同。因此，小程序的API和浏览器的API并不完全相同。

在小程序中，开发者可以使用WXML语言构建页面，WXML是一种类似HTML的标记语言，但并不是真正的HTML。小程序中的组件是由开发者提前定义好的，而不是由开发者在运行时动态生成的，因此在小程序中无法直接访问和操作DOM。相反，开发者需要使用小程序提供的API来操作组件。

同时，小程序为了保证安全性，也限制了一些操作，如不允许使用eval函数和Function构造函数等动态生成代码的方式。

## Comments / Answers

---

**yanlele** at 2023-05-30T15:41:21Z

补充：

小程序不能直接操作 DOM 是因为小程序采用了一种类似于虚拟 DOM 的渲染机制，与传统的基于浏览器的网页开发有所不同。小程序使用的是自定义的组件系统，通过对组件的数据进行更新和渲染，而不是直接操作底层的 DOM 元素。

以下是一些原因解释为何小程序不能操作 DOM：

1. 跨平台兼容性：小程序需要在不同的平台上运行，例如微信小程序在 iOS 和 Android 上都要支持。由于不同平台的底层渲染机制和 DOM API 存在差异，直接操作 DOM 可能会导致跨平台兼容性问题。

2. 安全性考虑：小程序运行在一个沙箱环境中，为了保障用户的安全和隐私，小程序限制了对底层 DOM 的直接访问。这样可以防止恶意代码对页面结构和用户数据的操控。

3. 性能优化：小程序采用了类似虚拟 DOM 的渲染机制，通过对组件的数据进行更新和渲染，实现了高效的页面渲染和更新。直接操作 DOM 可能会破坏渲染的优化策略，降低渲染性能。

在小程序中，我们通过定义组件和绑定数据的方式来实现页面的构建和更新。小程序框架提供了一系列的组件和 API 来操作组件的数据和状态，通过修改数据来触发页面的重新渲染。这种方式下，开发者无需关心底层的 DOM 操作，可以专注于组件的逻辑和数据处理，提高开发效率和性能。

需要注意的是，小程序提供了一些基础组件和操作 DOM 的能力，如 `<view>`、`<text>` 等组件，以及 `wx.createSelectorQuery`、`wx.createIntersectionObserver` 等 API，它们能够满足大部分的页面构建和交互需求。

---

**yanlele** at 2023-05-30T15:41:32Z

补充：

小程序不能直接操作 DOM 是因为小程序采用了一种类似于虚拟 DOM 的渲染机制，与传统的基于浏览器的网页开发有所不同。小程序使用的是自定义的组件系统，通过对组件的数据进行更新和渲染，而不是直接操作底层的 DOM 元素。

以下是一些原因解释为何小程序不能操作 DOM：

1. 跨平台兼容性：小程序需要在不同的平台上运行，例如微信小程序在 iOS 和 Android 上都要支持。由于不同平台的底层渲染机制和 DOM API 存在差异，直接操作 DOM 可能会导致跨平台兼容性问题。

2. 安全性考虑：小程序运行在一个沙箱环境中，为了保障用户的安全和隐私，小程序限制了对底层 DOM 的直接访问。这样可以防止恶意代码对页面结构和用户数据的操控。

3. 性能优化：小程序采用了类似虚拟 DOM 的渲染机制，通过对组件的数据进行更新和渲染，实现了高效的页面渲染和更新。直接操作 DOM 可能会破坏渲染的优化策略，降低渲染性能。

在小程序中，我们通过定义组件和绑定数据的方式来实现页面的构建和更新。小程序框架提供了一系列的组件和 API 来操作组件的数据和状态，通过修改数据来触发页面的重新渲染。这种方式下，开发者无需关心底层的 DOM 操作，可以专注于组件的逻辑和数据处理，提高开发效率和性能。

需要注意的是，小程序提供了一些基础组件和操作 DOM 的能力，如 `<view>`、`<text>` 等组件，以及 `wx.createSelectorQuery`、`wx.createIntersectionObserver` 等 API，它们能够满足大部分的页面构建和交互需求。

---

**wuhuaizai** at 2023-09-19T07:16:43Z

https://developers.weixin.qq.com/ebook?action=get_post_info&docid=0006a2289c8bb0bb0086ee8c056c0a