<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TCP 和 UDP的区别？ - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;h2&gt;TCP和UDP的区别&lt;/h2&gt;&lt;h3&gt;TCP、UDP和HTTP关系&lt;/h3&gt;&lt;p&gt;1、TCP/IP是个协议组，可分为三个层次：网络层、传输层和应用层。&lt;/p&gt;&lt;p&gt;在网络层有IP协议、ICMP协议、ARP协议、RARP协议和BOOTP协议。&lt;/p&gt;&lt;p&gt;在传输层中有TCP" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="TCP 和 UDP的区别？" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;h2&gt;TCP和UDP的区别&lt;/h2&gt;&lt;h3&gt;TCP、UDP和HTTP关系&lt;/h3&gt;&lt;p&gt;1、TCP/IP是个协议组，可分为三个层次：网络层、传输层和应用层。&lt;/p&gt;&lt;p&gt;在网络层有IP协议、ICMP协议、ARP协议、RARP协议和BOOTP协议。&lt;/p&gt;&lt;p&gt;在传输层中有TCP协议与UDP协议。&lt;/p&gt;&lt;p&gt;在应用层有FTP、HTTP、TELNET、SMTP、DNS等协议。&lt;/p&gt;&lt;p&gt;因此，H" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/72" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>TCP 和 UDP的区别？</h1>
      <div class="subtitle">网络 · 网络</div>
      <div class="meta">创建：2023-03-11T08:14:27Z · 更新：2023-03-11T08:14:57Z</div>
    </div>
    <article class="content markdown-body"><h2>TCP和UDP的区别</h2><h3>TCP、UDP和HTTP关系</h3><p>1、TCP/IP是个协议组，可分为三个层次：网络层、传输层和应用层。</p><p>在网络层有IP协议、ICMP协议、ARP协议、RARP协议和BOOTP协议。</p><p>在传输层中有TCP协议与UDP协议。</p><p>在应用层有FTP、HTTP、TELNET、SMTP、DNS等协议。</p><p>因此，HTTP本身就是一个协议，是从Web服务器传输超文本到本地浏览器的传送协议。</p><p>TCP 是基于 TCP 协议实现的网络文本协议,属于传输层。</p><p>UDP 是和TCP 对等的，属于传输层，UDP 和 TCP 有重要的区别。</p><p>2、HTTP协议是建立在请求/响应模型上的。</p><p>首先由客户建立一条与服务器的TCP链接，并发送一个请求到服务器，请求中包含请求方法、URI、协议版本以及相关的MIME样式的消息。</p><p>服务器响应一个状态行，包含消息的协议版本、一个成功和失败码以及相关的MIME式样的消息。</p><p>HTTP/1.0为每一次HTTP的请求/响应建立一条新的TCP链接，因此一个包含HTML内容和图片的页面将需要建立多次的短期的TCP链接。一次TCP链接的建立将需要3次握手。</p><p>另外，为了获得适当的传输速度，则需要TCP花费额外的回路链接时间（RTT）。</p><p>每一次链接的建立需要这种经常性的开销，而其并不带有实际有用的数据，只是保证链接的可靠性，</p><p>因此HTTP/1.1提出了可持续链接的实现方法。HTTP/1.1将只建立一次TCP的链接而重复地使用它传输一系列的请求/响应消息，因此减少了链接建立的次数和经常性的链接开销。</p><p>三次握手的过程:</p><p>第一次握手：建立连接时，客户端发送syn包（syn=j）到服务器，并进入SYN_SENT状态，等待服务器确认；SYN：同步序列编号（Synchronize Sequence Numbers）。</p><p>第二次握手：服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；ACK:确认字符(Acknowledgement)</p><p>第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=k+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。</p><p>3、结论：虽然HTTP本身是一个协议，但其最终还是基于TCP的。</p><p>Socket是应用层与TCP/IP协议族通信的中间软件抽象层，它是一组接口。在设计模式中，Socket其实就是一个门面模式，它把复杂的TCP/IP协议族隐藏在Socket接口后面，对用户来说，一组简单的接口就是全部，让Socket去组织数据，以符合指定的协议。</p><p><img alt="02-05-01" src="https://user-images.githubusercontent.com/22188674/224473152-067c338d-86d5-48ff-8197-85396a77b3c8.jpg" /></p><p>HTTPS：（全称：Hypertext Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道，简单讲是HTTP的安全版。</p><p>即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。</p><p>优点：<strong>协议较成熟，应用广泛、基于TCP/IP，拥有TCP优点、研发成本很低，开发快速、开源软件较多</strong>，nginx,apache,tomact等</p><p>缺点：<strong>无状态、无连接</strong>、只有PULL模式，不支持PUSH、数据报文较大</p><p>特性：<strong>基于TCP/IP应用层协议、无状态，无连接</strong>、支持C/S模式、适用于文本传输</p><h3>TCP</h3><p>TCP（Transmission Control Protocol，传输控制协议）是基于连接的协议，也就是说，在正式收发数据前，必须和对方建立可靠的连接。</p><p>一个TCP连接必须要经过三次“对话”才能建立起来，其中的过程非常复杂，我们这里只做简单、形象的介绍，你只要做到能够理解这个过程即可。</p><p>我们来看看这三次对话的简单过程：主机A向主机B发出连接请求数据包：“我想给你发数据，可以吗？”，</p><p>这是第一次对话；主机B向主机A发送同意连接和要求同步（同步就是两台主机一个在发送，一个在接收，协调工作）的数据包：“可以，你什么时候发？”，这是第二次对话；</p><p>主机A再发出一个数据包确认主机B的要求同步：“我现在就发，你接着吧！”，这是第三次对话。</p><p>三次“对话”的目的是使数据包的发送和接收同步，经过三次“对话”之后，主机A才向主机B正式发送数据。</p><p>TCP：（Transmission Control Protocol，传输控制协议）是面向连接的协议，也就是说，在收发数据前，必须和对方建立可靠的连接。</p><p>一个TCP连接必须要经过三次“对话”才能建立起来，其中的过程非常复杂。</p><p>建立一个连接需要三次握手，而终止一个连接要经过四次握手，这是由TCP的半关闭（half-close）造成的。</p><p>优点：<strong>可靠性 、全双工协议、开源支持多、应用较广泛、面向连接</strong>、研发成本低、报文内容不限制（IP层自动分包，重传，不大于1452bytes）</p><p>缺点：操作系统：较耗内存，支持连接数有限、设计：协议较复杂，自定义应用层协议、网络：网络差情况下延迟较高、传输：效率低于UDP协议特性： 面向连接、可靠性、全双工协议、基于IP层、OSI参考模型位于传输层、适用于二进制传输</p><p><strong>三次握手 与 四次挥手</strong></p><p>当客户端和服务器通过三次握手建立了TCP连接以后，当数据传送完毕，肯定是要断开TCP连接的啊。那对于TCP的断开连接，这里就有了神秘的“四次挥手”。</p><p>1.第一次挥手：主机1(可以使客户端，也可以是服务器端)，设置Sequence Number和Acknowledgment Number，向主机2发送一个FIN报文段;此时，主机1进入FIN_WAIT_1状态;这表示主机1没有数据要发送给主机2了;</p><p>2.第二次挥手：主机2收到了主机1发送的FIN报文段，向主机1回一个ACK报文段，Acknowledgment Number为Sequence Number加1;主机1进入FIN_WAIT_2状态;主机2告诉主机1，我也没有数据要发送了，可以进行关闭连接了;</p><p>3.第三次挥手：主机2向主机1发送FIN报文段，请求关闭连接，同时主机2进入CLOSE_WAIT状态;</p><p>4.第四次挥手：主机1收到主机2发送的FIN报文段，向主机2发送ACK报文段，然后主机1进入TIME_WAIT状态;主机2收到主机1的ACK报文段以后，就关闭连接;此时，主机1等待2MSL后依然没有收到回复，则证明Server端已正常关闭，那好，主机1也可以关闭连接了。</p><p>至此，TCP的四次挥手就这么愉快的完成了。</p><h3>UDP</h3><p>UDP（User Data Protocol，用户数据报协议）是与TCP相对应的协议。它是面向非连接的协议，它不与对方建立连接，而是直接就把数据包发送过去！</p><p>UDP适用于一次只传送少量数据、对可靠性要求不高的应用环境。</p><p>比如，我们经常使用“ping”命令来测试两台主机之间TCP/IP通信是否正常，其实“ping”命令的原理就是向对方主机发送UDP数据包，</p><p>然后对方主机确认收到数据包，如果数据包是否到达的消息及时反馈回来，那么网络就是通的。</p><p>例如，在默认状态下，一次“ping”操作发送4个数据包（如图2所示）。大家可以看到，发送的数据包数量是4包，</p><p>收到的也是4包（因为对方主机收到后会发回一个确认收到的数据包）。这充分说明了UDP协议是面向非连接的协议，</p><p>没有建立连接的过程。正因为UDP协议没有连接的过程，所以它的通信效果高；但也正因为如此，它的可靠性不如TCP协议高。</p><p>QQ就使用UDP发消息，因此有时会出现收不到消息的情况。</p><p>UDP：UDP是一个无连接协议，传输数据之前源端和终端不建立连接，当它想传送时就简单地去抓取来自应用程序的数据，</p><p>并尽可能快地把它扔到网络上。在发送端，UDP传送数据的速度仅仅是受应用程序生成数据的速度、计算机的能力和传输带宽的限制；</p><p>在接收端，UDP把每个消息段放在队列中，应用程序每次从队列中读一个消息段。</p><p>优点：操作系统：并发高，内存消耗较低、传输：效率高，网络延迟低、传输模型简单，研发成本低</p><p>缺点：协议不可靠、单向协议、开源支持少、报文内容有限，不能大于1464bytes、设计：协议设计较复杂、网络：网络差，而且丢数据报文</p><p>特性：无连接，不可靠，基于IP协议层，OSI参考模型位于传输层，最大努力交付，适用于二进制传输</p><h3>对比</h3><p>场景  |    TCP   |    UDP</p><p>:- | :- |:-</p><p>是否连接   |  面向连接  | 面向非连接</p><p>传输可靠性 |    可靠   |   不可靠</p><p>应用场合   | 传输大量数据  |少量数据</p><p>速度      |    慢      |    快</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>