<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>为什么小程序里拿不到dom相关的api - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;小程序为了追求更高的性能和更好的安全性，采用了类Webview的渲染方案，并使用了自己的渲染引擎，与浏览器的渲染引擎不同。因此，小程序的API和浏览器的API并不完全相同。&lt;/p&gt;&lt;p&gt;在小程序中，开发者可以使用WXML语言构建页面，WXML是一种类似HTML的标记语言，但" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="为什么小程序里拿不到dom相关的api" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;小程序为了追求更高的性能和更好的安全性，采用了类Webview的渲染方案，并使用了自己的渲染引擎，与浏览器的渲染引擎不同。因此，小程序的API和浏览器的API并不完全相同。&lt;/p&gt;&lt;p&gt;在小程序中，开发者可以使用WXML语言构建页面，WXML是一种类似HTML的标记语言，但并不是真正的HTML。小程序中的组件是由开发者提前定义好的，而不是由开发者在运行时动态生成的，因此在小程序中无法直接访问" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/173" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>为什么小程序里拿不到dom相关的api</h1>
      <div class="subtitle">web框架 · web框架</div>
      <div class="meta">创建：2023-03-26T08:08:34Z · 更新：2023-09-19T07:16:43Z</div>
    </div>
    <article class="content markdown-body"><p>小程序为了追求更高的性能和更好的安全性，采用了类Webview的渲染方案，并使用了自己的渲染引擎，与浏览器的渲染引擎不同。因此，小程序的API和浏览器的API并不完全相同。</p><p>在小程序中，开发者可以使用WXML语言构建页面，WXML是一种类似HTML的标记语言，但并不是真正的HTML。小程序中的组件是由开发者提前定义好的，而不是由开发者在运行时动态生成的，因此在小程序中无法直接访问和操作DOM。相反，开发者需要使用小程序提供的API来操作组件。</p><p>同时，小程序为了保证安全性，也限制了一些操作，如不允许使用eval函数和Function构造函数等动态生成代码的方式。</p><h2>Comments / Answers</h2><hr /><p><strong>yanlele</strong> at 2023-05-30T15:41:21Z</p><p>补充：</p><p>小程序不能直接操作 DOM 是因为小程序采用了一种类似于虚拟 DOM 的渲染机制，与传统的基于浏览器的网页开发有所不同。小程序使用的是自定义的组件系统，通过对组件的数据进行更新和渲染，而不是直接操作底层的 DOM 元素。</p><p>以下是一些原因解释为何小程序不能操作 DOM：</p><ol><li>跨平台兼容性：小程序需要在不同的平台上运行，例如微信小程序在 iOS 和 Android 上都要支持。由于不同平台的底层渲染机制和 DOM API 存在差异，直接操作 DOM 可能会导致跨平台兼容性问题。</li></ol><ol><li>安全性考虑：小程序运行在一个沙箱环境中，为了保障用户的安全和隐私，小程序限制了对底层 DOM 的直接访问。这样可以防止恶意代码对页面结构和用户数据的操控。</li></ol><ol><li>性能优化：小程序采用了类似虚拟 DOM 的渲染机制，通过对组件的数据进行更新和渲染，实现了高效的页面渲染和更新。直接操作 DOM 可能会破坏渲染的优化策略，降低渲染性能。</li></ol><p>在小程序中，我们通过定义组件和绑定数据的方式来实现页面的构建和更新。小程序框架提供了一系列的组件和 API 来操作组件的数据和状态，通过修改数据来触发页面的重新渲染。这种方式下，开发者无需关心底层的 DOM 操作，可以专注于组件的逻辑和数据处理，提高开发效率和性能。</p><p>需要注意的是，小程序提供了一些基础组件和操作 DOM 的能力，如 <code>&lt;view&gt;</code>、<code>&lt;text&gt;</code> 等组件，以及 <code>wx.createSelectorQuery</code>、<code>wx.createIntersectionObserver</code> 等 API，它们能够满足大部分的页面构建和交互需求。</p><hr /><p><strong>yanlele</strong> at 2023-05-30T15:41:32Z</p><p>补充：</p><p>小程序不能直接操作 DOM 是因为小程序采用了一种类似于虚拟 DOM 的渲染机制，与传统的基于浏览器的网页开发有所不同。小程序使用的是自定义的组件系统，通过对组件的数据进行更新和渲染，而不是直接操作底层的 DOM 元素。</p><p>以下是一些原因解释为何小程序不能操作 DOM：</p><ol><li>跨平台兼容性：小程序需要在不同的平台上运行，例如微信小程序在 iOS 和 Android 上都要支持。由于不同平台的底层渲染机制和 DOM API 存在差异，直接操作 DOM 可能会导致跨平台兼容性问题。</li></ol><ol><li>安全性考虑：小程序运行在一个沙箱环境中，为了保障用户的安全和隐私，小程序限制了对底层 DOM 的直接访问。这样可以防止恶意代码对页面结构和用户数据的操控。</li></ol><ol><li>性能优化：小程序采用了类似虚拟 DOM 的渲染机制，通过对组件的数据进行更新和渲染，实现了高效的页面渲染和更新。直接操作 DOM 可能会破坏渲染的优化策略，降低渲染性能。</li></ol><p>在小程序中，我们通过定义组件和绑定数据的方式来实现页面的构建和更新。小程序框架提供了一系列的组件和 API 来操作组件的数据和状态，通过修改数据来触发页面的重新渲染。这种方式下，开发者无需关心底层的 DOM 操作，可以专注于组件的逻辑和数据处理，提高开发效率和性能。</p><p>需要注意的是，小程序提供了一些基础组件和操作 DOM 的能力，如 <code>&lt;view&gt;</code>、<code>&lt;text&gt;</code> 等组件，以及 <code>wx.createSelectorQuery</code>、<code>wx.createIntersectionObserver</code> 等 API，它们能够满足大部分的页面构建和交互需求。</p><hr /><p><strong>wuhuaizai</strong> at 2023-09-19T07:16:43Z</p><p>https://developers.weixin.qq.com/ebook?action=get_post_info&docid=0006a2289c8bb0bb0086ee8c056c0a</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>