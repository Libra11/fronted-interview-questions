<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>如何冻结一个 JS 对象【热度: 949】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：Object.freeze、Object.freeze作用、深度冻结对象&lt;/p&gt;&lt;p&gt;&lt;strong&gt;冻结对象&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;要冻结一个 JavaScript 对象，以防止别人更改它，可以使用&lt;code&gt;Object" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="如何冻结一个 JS 对象【热度: 949】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：Object.freeze、Object.freeze作用、深度冻结对象&lt;/p&gt;&lt;p&gt;&lt;strong&gt;冻结对象&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;要冻结一个 JavaScript 对象，以防止别人更改它，可以使用&lt;code&gt;Object.freeze()&lt;/code&gt;方法。&lt;code&gt;Object.freeze()&lt;/code&gt;方法会递归地冻结一个对象的" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/486" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>如何冻结一个 JS 对象【热度: 949】</h1>
      <div class="subtitle">Shopee · JavaScript · Shopee</div>
      <div class="meta">创建：2023-07-25T16:28:54Z · 更新：2023-07-25T16:28:55Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：Object.freeze、Object.freeze作用、深度冻结对象</p><p><strong>冻结对象</strong></p><p>要冻结一个 JavaScript 对象，以防止别人更改它，可以使用<code>Object.freeze()</code>方法。<code>Object.freeze()</code>方法会递归地冻结一个对象的所有属性，使其变为只读的，并防止更改、删除或添加新属性。以下是使用<code>Object.freeze()</code>方法冻结对象的示例：</p><pre class="code-block"><code class="language-javascript">const obj = {
  prop1: 1,
  prop2: &#39;Hello&#39;,
};

Object.freeze(obj);

// 尝试更改属性的值
obj.prop1 = 2; // 不会生效，obj.prop1仍然为1

// 尝试删除属性
delete obj.prop2; // 不会生效，obj仍然包含prop2属性

// 尝试添加新属性
obj.prop3 = true; // 不会生效，obj不会添加新属性

console.log(obj);
</code></pre><p>在上述示例中，通过调用<code>Object.freeze(obj)</code>方法，将<code>obj</code>对象冻结，使其变为只读。此后，无论是更改、删除还是添加属性，都不会对对象产生任何影响。最后，通过<code>console.log(obj)</code>输出对象，可以看到对象保持不变，即使尝试进行更改。</p><p>需要注意的是，<code>Object.freeze()</code>方法只会冻结对象的直接属性，而不会冻结嵌套对象的属性。如果需要递归地冻结嵌套对象的属性，可以编写一个递归函数来处理。</p><p><strong>深度冻结</strong></p><p>要冻结嵌套属性，可以使用一个递归函数来处理。该函数会遍历对象的所有属性，并对每个属性进行冻结。以下是一个示例：</p><pre class="code-block"><code class="language-javascript">function deepFreeze(obj) {
  // 首先冻结当前对象
  Object.freeze(obj);

  // 遍历对象的所有属性
  for (let key of Object.keys(obj)) {
    let value = obj[key];

    // 如果属性是对象类型，则递归调用deepFreeze函数
    if (typeof value === &#39;object&#39; &amp;&amp; value !== null) {
      deepFreeze(value);
    }
  }

  return obj;
}

const obj = {
  prop1: 1,
  prop2: {
    nestedProp1: &#39;Hello&#39;,
    nestedProp2: [1, 2, 3],
  },
};

const frozenObj = deepFreeze(obj);

// 尝试更改嵌套属性的值
frozenObj.prop2.nestedProp1 = &#39;World&#39;; // 不会生效，嵌套属性仍然为&#39;Hello&#39;

console.log(frozenObj);
</code></pre><p>在上述示例中，我们定义了一个名为<code>deepFreeze</code>的递归函数。该函数首先会对当前对象进行冻结（调用<code>Object.freeze(obj)</code>），然后遍历对象的所有属性。如果属性是对象类型，则递归调用<code>deepFreeze</code>函数，对嵌套对象进行冻结。</p><p>通过调用<code>deepFreeze(obj)</code>函数，我们将<code>obj</code>对象及其嵌套属性都冻结，并将结果赋值给<code>frozenObj</code>。尝试更改嵌套属性的值后，输出<code>frozenObj</code>，可以看到对象保持不变，嵌套属性的值没有被更改。</p><p>需要注意的是，<code>deepFreeze</code>函数并不会修改原始对象，而是返回一个新的冻结对象。如果需要修改原始对象，可以将冻结的属性逐个复制到一个新对象中。</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>