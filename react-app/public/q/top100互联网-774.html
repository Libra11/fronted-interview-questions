<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>[React] useEffect 依赖为空数组与 componentDidMount 区别【热度: 366】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：useEffect 与 componentDidMount 区别&lt;/p&gt;&lt;p&gt;&lt;code&gt;useEffect&lt;/code&gt; 是 React 函数组件的生命周期钩子，它是替代类组件中 &lt;code&gt;componentDidMount&lt;/" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="[React] useEffect 依赖为空数组与 componentDidMount 区别【热度: 366】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：useEffect 与 componentDidMount 区别&lt;/p&gt;&lt;p&gt;&lt;code&gt;useEffect&lt;/code&gt; 是 React 函数组件的生命周期钩子，它是替代类组件中 &lt;code&gt;componentDidMount&lt;/code&gt;、&lt;code&gt;componentDidUpdate&lt;/code&gt; 和 &lt;code&gt;componentWillU" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/774" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>[React] useEffect 依赖为空数组与 componentDidMount 区别【热度: 366】</h1>
      <div class="subtitle">TOP100互联网 · web框架 · TOP100互联网</div>
      <div class="meta">创建：2024-05-26T06:10:05Z · 更新：2024-05-26T06:10:06Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：useEffect 与 componentDidMount 区别</p><p><code>useEffect</code> 是 React 函数组件的生命周期钩子，它是替代类组件中 <code>componentDidMount</code>、<code>componentDidUpdate</code> 和 <code>componentWillUnmount</code> 生命周期方法的统一方式。</p><p>当你给 <code>useEffect</code> 的依赖项数组传入一个空数组（<code>[]</code>），它的行为类似于 <code>componentDidMount</code>，但实质上有些区别：</p><ol><li>执行时机：</li></ol><ul><li><code>componentDidMount</code>：在类组件的实例被创建并插入 DOM 之后（即挂载完成后）会立即被调用一次。</li><li><code>useEffect</code>（依赖为空数组）：在函数组件的渲染结果被提交到 DOM 之后，在浏览器绘制之前被调用。React 保证了不会在 DOM 更新后阻塞页面绘制。</li></ul><ol><li>清除操作：</li></ol><ul><li><code>componentDidMount</code>：不涉及清理机制。</li><li><code>useEffect</code>：可以返回一个清理函数，React 会在组件卸载或重新渲染（当依赖项改变时）之前调用这个函数。对于只依赖空数组的 <code>useEffect</code>，此清理函数只会在组件卸载时被调用。</li></ul><ol><li>执行次数：</li></ol><ul><li><code>componentDidMount</code>：在 render 执行之后，componentDidMount 会执行，如果在这个生命周期中再一次 setState ，会导致再次 render ，返回了新的值，浏览器只会渲染第二次 render 返回的值，这样可以避免闪屏。</li><li><code>useEffect</code>：是在真实的 DOM 渲染之后才会去执行，在这个 hooks 中再一次 setState, 这会造成两次 render ，有可能会闪屏。</li></ul><p>实际上 <code>useLayoutEffect</code> 会更接近 <code>componentDidMount</code> 的表现，它们都同步执行且会阻碍真实的 DOM 渲染的</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>