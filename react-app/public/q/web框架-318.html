<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>[React] React15 架构存在什么样的问题？【热度: 1,613】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：react15 架构、react 架构、react Reconciler、react 渲染器、react 协调器&lt;/p&gt;&lt;p&gt;React15 架构可以分为两层：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Reconciler（协调器）—— 负责找出变化" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="[React] React15 架构存在什么样的问题？【热度: 1,613】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：react15 架构、react 架构、react Reconciler、react 渲染器、react 协调器&lt;/p&gt;&lt;p&gt;React15 架构可以分为两层：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Reconciler（协调器）—— 负责找出变化的组件&lt;/li&gt;&lt;li&gt;Renderer（渲染器）—— 负责将变化的组件渲染到页面上&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;Reco" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/318" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>[React] React15 架构存在什么样的问题？【热度: 1,613】</h1>
      <div class="subtitle">web框架 · web框架</div>
      <div class="meta">创建：2023-04-27T14:59:36Z · 更新：2023-04-27T15:13:34Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：react15 架构、react 架构、react Reconciler、react 渲染器、react 协调器</p><p>React15 架构可以分为两层：</p><ul><li>Reconciler（协调器）—— 负责找出变化的组件</li><li>Renderer（渲染器）—— 负责将变化的组件渲染到页面上</li></ul><h3>Reconciler（协调器）</h3><p>我们知道，在React中可以通过 <code>this.setState、this.forceUpdate、ReactDOM.render</code> 等API触发更新。</p><p>每当有更新发生时，Reconciler会做如下工作：</p><ul><li>调用函数组件、或class组件的render方法，将返回的JSX转化为虚拟DOM</li><li>将虚拟DOM和上次更新时的虚拟DOM对比</li><li>通过对比找出本次更新中变化的虚拟DOM</li><li>通知Renderer将变化的虚拟DOM渲染到页面上</li></ul><h3>Renderer（渲染器）</h3><p>由于React支持跨平台，所以不同平台有不同的Renderer。我们前端最熟悉的是负责在浏览器环境渲染的Renderer —— <code>ReactDOM</code></p><p>除此之外，还有：</p><ul><li>ReactNative 渲染器，渲染App原生组件</li><li>ReactTest 渲染器，渲染出纯Js对象用于测试</li><li>ReactArt 渲染器，渲染到Canvas, SVG 或 VML (IE8)</li></ul><p>在每次更新发生时，Renderer接到 <code>Reconciler</code> 通知，将变化的组件渲染在当前宿主环境。</p><h3>React15 架构的缺点</h3><p><strong>react15 是通过递归去更新组件的</strong></p><p>在 Reconciler 中，mount的组件会调用 mountComponent (opens new window)，update 的组件会调用 updateComponent (opens new window)。这两个方法都会递归更新子组件。</p><p><strong>由于递归执行，所以更新一旦开始，中途就无法中断。当层级很深时，递归更新时间超过了16ms，用户交互就会卡顿。</strong></p><p>本质上说是因为 递归 的架构， 是不允许中断的， 因为 react 希望有更好的渲染性能，那么面对大规模 dom diff 更新渲染的时候， 就不能让每一递归时间超过 16 ms。</p><p>递归是做不到这个功能的。 所以只有重写 react15 架构。引入了 react16 fiber 架构。</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>