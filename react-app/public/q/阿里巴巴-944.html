<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>[webpack] 发中使用的是 esm 和 webpack, 是否可以直接调用 commonjs 模块化的三方包【热度: 359】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：模块化混用&lt;/p&gt;&lt;p&gt;在使用 Webpack 作为构建工具的项目中，ESM (ECMAScript Modules) 和 CommonJS 模块系统可以混用。&lt;/p&gt;&lt;p&gt;Webpack 提供了对两种模块化标准的支持，能够理解和处" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="[webpack] 发中使用的是 esm 和 webpack, 是否可以直接调用 commonjs 模块化的三方包【热度: 359】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：模块化混用&lt;/p&gt;&lt;p&gt;在使用 Webpack 作为构建工具的项目中，ESM (ECMAScript Modules) 和 CommonJS 模块系统可以混用。&lt;/p&gt;&lt;p&gt;Webpack 提供了对两种模块化标准的支持，能够理解和处理它们之间的差异，使得这两种不同类型的模块可以在同一个项目中共存。&lt;/p&gt;&lt;h3&gt;混用时的考虑因素&lt;/h3&gt;&lt;p&gt;虽然 " />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/944" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>[webpack] 发中使用的是 esm 和 webpack, 是否可以直接调用 commonjs 模块化的三方包【热度: 359】</h1>
      <div class="subtitle">阿里巴巴 · 工程化 · 阿里巴巴</div>
      <div class="meta">创建：2024-09-28T02:18:10Z · 更新：2024-09-28T02:18:11Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：模块化混用</p><p>在使用 Webpack 作为构建工具的项目中，ESM (ECMAScript Modules) 和 CommonJS 模块系统可以混用。</p><p>Webpack 提供了对两种模块化标准的支持，能够理解和处理它们之间的差异，使得这两种不同类型的模块可以在同一个项目中共存。</p><h3>混用时的考虑因素</h3><p>虽然 ESM 和 CommonJS 可以混用，但是还需要注意一些关键的点：</p><ul><li><strong>导入方式</strong>：当你从一个 ESM 模块中导入 CommonJS 模块时，导入的内容会被当成默认导出处理。这意味着，即使 CommonJS 模块导出了多个成员，你也需要以默认导入的方式来获取整个 <code>exports</code> 对象。</li></ul><p>```javascript</p><p>// CommonJS 模块</p><p>module.exports = {</p><p>foo: "bar",</p><p>baz: "qux",</p><p>};</p><p>// 在 ESM 中导入 CommonJS 模块</p><p>import cjsModule from "./cjs-module";</p><p>console.log(cjsModule.foo); // 输出: 'bar'</p><p>```</p><ul><li><strong>导出方式</strong>：在一个 CommonJS 模块中，你可以通过 <code>require</code> 导入一个 ESM，但是这通常需要额外配置，因为 ESM 默认是异步加载的。此外，ESM 模块的导出在被 CommonJS 模块通过 <code>require</code> 导入时，必须访问它们的 <code>default</code> 属性或使用 <code>import()</code> 异步导入语句。</li></ul><ul><li><strong>动态与静态</strong>：ESM 是静态的，这意味着你不能动态地导入或导出模块，所有的导入和导出必须在模块的顶层发生。CommonJS 模块是动态的，允许你将 <code>require</code> 语句放在代码的任何位置。由于这种静态与动态的区别，混用时要考虑代码组织和模块加载顺序。</li></ul><ul><li><strong>构建与树摇（Tree Shaking）</strong>：Webpack 可以对 ESM 进行树摇优化，以去除未使用的导出。这可以减少最终构建包的大小。由于 CommonJS 模块是动态的，它们不完全支持树摇。如果在意最终包的大小，优先使用 ESM 来编写新模块可能会更好。</li></ul><h3>总结</h3><p>在 Webpack 下，ESM 和 CommonJS 可以混用，但是混用时需要注意导入导出的细微差别，以及可能对构建优化产生的影响。理解这些模块系统之间的差异，并合理组织代码，可以充分利用 Webpack 提供的灵活性和功能，编写高效且可维护的现代 JavaScript 应用。</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>