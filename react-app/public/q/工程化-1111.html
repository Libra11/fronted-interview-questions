<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>介绍一下 Web Components和Shadow DOM【热度: 489】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：Web Components&lt;/p&gt;&lt;h3&gt;Web Components 和 Shadow DOM 详解&lt;/h3&gt;&lt;h4&gt;一、Web Components 概述&lt;/h4&gt;&lt;p&gt;Web Components 是一套用于构建可复用、封装" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="介绍一下 Web Components和Shadow DOM【热度: 489】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：Web Components&lt;/p&gt;&lt;h3&gt;Web Components 和 Shadow DOM 详解&lt;/h3&gt;&lt;h4&gt;一、Web Components 概述&lt;/h4&gt;&lt;p&gt;Web Components 是一套用于构建可复用、封装性强的 Web 组件的标准，它允许开发者创建自定义 HTML 元素，这些元素具有独立的功能、样式和行为，可在不同项目中重" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/1111" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>介绍一下 Web Components和Shadow DOM【热度: 489】</h1>
      <div class="subtitle">工程化 · 工程化</div>
      <div class="meta">创建：2025-05-30T15:35:11Z · 更新：2025-05-30T15:35:11Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：Web Components</p><h3>Web Components 和 Shadow DOM 详解</h3><h4>一、Web Components 概述</h4><p>Web Components 是一套用于构建可复用、封装性强的 Web 组件的标准，它允许开发者创建自定义 HTML 元素，这些元素具有独立的功能、样式和行为，可在不同项目中重复使用。</p><h4>二、Web Components 的核心组成部分</h4><ul><li><strong>Custom Elements</strong>：定义自定义 HTML 元素的 API，通过继承 <code>HTMLElement</code> 或其他内置元素类来创建新元素。</li><li><strong>示例</strong>：</li></ul><p>```javascript</p><p>class MyButton extends HTMLElement {</p><p>connectedCallback() {</p><p>this.innerHTML = "<button>点击我</button>";</p><p>}</p><p>}</p><p>customElements.define("my-button", MyButton);</p><p>```</p><ul><li><strong>HTML Templates</strong>：使用 <code>&lt;template&gt;</code> 标签定义可复用的模板，模板内容在运行时才会被解析。</li><li><strong>示例</strong>：</li></ul><p>```html</p><p><template id="buttonTemplate"></p><p><style></p><p>button {</p><p>color: blue;</p><p>}</p><p></style></p><p><button>自定义按钮</button></p><p></template></p><p>```</p><ul><li><strong>Shadow DOM</strong>：为组件创建独立的 DOM 树和样式作用域，避免与外部样式冲突。</li><li><strong>HTML Imports</strong>（已被 ES 模块取代）：导入外部 HTML 文件以复用组件结构。</li></ul><h4>三、Shadow DOM 详解</h4><p>Shadow DOM 是 Web Components 的关键特性，它为组件提供了封装的 DOM 环境，具有以下核心特点：</p><h5>（一）Shadow DOM 的核心概念</h5><ul><li><strong>Shadow Root</strong>：Shadow DOM 的根节点，通过 <code>element.attachShadow()</code> 方法创建。</li><li><strong>Light DOM</strong>：宿主元素的原始 DOM 内容。</li><li><strong>Shadow DOM 与 Light DOM 的融合</strong>：通过 <code>&lt;slot&gt;</code> 元素将 Light DOM 内容插入到 Shadow DOM 中。</li></ul><h5>（二）创建 Shadow DOM 的步骤</h5><ol><li><strong>创建 Shadow Root</strong>：</li></ol><p>```javascript</p><p>const shadowRoot = element.attachShadow({ mode: "open" }); // open 模式允许外部访问 shadowRoot</p><p>// 或 mode: 'closed' 模式禁止外部访问</p><p>```</p><ol><li><strong>向 Shadow Root 中添加内容</strong>：</li></ol><p>```javascript</p><p>shadowRoot.innerHTML = `</p><p><style>p { color: red; }</style></p><p><p>Shadow DOM 内容</p></p><p>`;</p><p>```</p><h5>（三）Shadow DOM 的作用</h5><ul><li><strong>样式隔离</strong>：Shadow DOM 内的样式不会影响外部，外部样式也不会渗透到内部（除非使用特殊选择器）。</li><li><strong>结构封装</strong>：组件内部 DOM 结构对外部不可见，避免被意外修改。</li><li><strong>Slot 分发机制</strong>：通过 <code>&lt;slot name=&quot;xxx&quot;&gt;</code> 定义插槽，允许外部内容以灵活方式插入组件。</li></ul><h4>四、Web Components 与 Shadow DOM 的关系</h4><ul><li><strong>Shadow DOM 是 Web Components 的实现基础</strong>：通过 Shadow DOM 实现组件的样式和 DOM 封装。</li><li><strong>结合使用场景</strong>：</li></ul><ol><li>创建自定义按钮、表单控件等可复用组件。</li><li>构建复杂页面模块（如导航栏、卡片组件），避免样式冲突。</li><li>封装第三方组件，防止其样式污染页面。</li></ol><h4>五、浏览器兼容性与 Polyfill</h4><ul><li><strong>兼容性</strong>：现代浏览器（Chrome、Firefox、Safari 等）已广泛支持，但 IE 及旧版 Edge 不支持。</li><li><strong>Polyfill 库</strong>：如 <a href="https://lit.dev/" target="_blank" rel="noopener">lit-element</a>、<a href="https://www.polymer-project.org/" target="_blank" rel="noopener">polymer</a> 可用于兼容旧浏览器。</li></ul><h4>六、实际应用案例</h4><ul><li><strong>原生组件</strong>：<code>&lt;video&gt;</code>、<code>&lt;audio&gt;</code> 等标签内部使用了 Shadow DOM。</li><li><strong>框架实践</strong>：Vue 3 的单文件组件（.vue）、React 的 CSS-in-JS 方案借鉴了组件封装思想。</li><li><strong>开源组件库</strong>：如 <a href="https://material.io/components/web" target="_blank" rel="noopener">Material Components for the Web</a> 基于 Web Components 构建。</li></ul><h4>七、总结</h4><p>Web Components 和 Shadow DOM 是前端组件化的重要标准，通过封装性解决了传统前端开发中样式污染、代码复用性差的问题，为构建大型应用提供了更规范的解决方案。随着浏览器支持度的提升，它们已成为现代前端开发的核心技术之一。</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>