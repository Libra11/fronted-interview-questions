<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>http 响应头中的 ETag 值是如何生成的【热度: 37】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：ETag 值&lt;/p&gt;&lt;blockquote&gt;作者备注&lt;/blockquote&gt;&lt;blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&gt;没有啥价值， 当做科普吧&lt;/blockquote&gt;&lt;p&gt;HTTP 响应头中的 E" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="http 响应头中的 ETag 值是如何生成的【热度: 37】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：ETag 值&lt;/p&gt;&lt;blockquote&gt;作者备注&lt;/blockquote&gt;&lt;blockquote&gt;&lt;/blockquote&gt;&lt;blockquote&gt;没有啥价值， 当做科普吧&lt;/blockquote&gt;&lt;p&gt;HTTP 响应头中的 ETag（Entity Tag）是服务器生成的用于标识资源的一个字符串。ETag 的生成方式通常有以下几种：&lt;/p&gt;&lt;p&gt;" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/961" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>http 响应头中的 ETag 值是如何生成的【热度: 37】</h1>
      <div class="subtitle">web应用场景 · web应用场景 · 阿里巴巴</div>
      <div class="meta">创建：2024-10-07T07:56:56Z · 更新：2024-10-07T07:56:57Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：ETag 值</p><blockquote>作者备注</blockquote><blockquote></blockquote><blockquote>没有啥价值， 当做科普吧</blockquote><p>HTTP 响应头中的 ETag（Entity Tag）是服务器生成的用于标识资源的一个字符串。ETag 的生成方式通常有以下几种：</p><p><strong>一、基于资源内容生成</strong></p><ol><li>哈希算法：</li></ol><ul><li>服务器可以计算资源内容的哈希值，例如使用 MD5、SHA-1 等哈希算法。将资源的内容作为输入，计算出一个固定长度的哈希值作为 ETag。</li><li>这种方式可以确保只要资源内容发生变化，ETag 就会不同。</li><li>例如，服务器读取文件内容，计算其 MD5 哈希值，将其作为 ETag 返回给客户端。</li></ul><ol><li>特征提取：</li></ol><ul><li>对于某些资源，可能无法直接计算哈希值，或者计算哈希值的成本较高。在这种情况下，可以提取资源的一些特征来生成 ETag。</li><li>例如，对于一个数据库记录，可以根据记录的主键、创建时间、更新时间等属性组合生成一个唯一的字符串作为 ETag。</li></ul><p><strong>二、基于资源属性生成</strong></p><ol><li>版本号或时间戳：</li></ol><ul><li>服务器可以为资源分配一个版本号或使用资源的最后修改时间戳作为 ETag。</li><li>当资源被修改时，版本号或时间戳会更新，从而导致 ETag 发生变化。</li><li>例如，一个动态生成的网页可以在每次更新时增加一个版本号，并将版本号作为 ETag 返回。</li></ul><ol><li>资源标识符：</li></ol><ul><li>如果资源有一个唯一的标识符，如数据库中的主键、文件系统中的路径等，可以将其作为 ETag 的一部分。</li><li>这样，即使资源内容没有变化，只要资源的标识符不同，ETag 也会不同。</li></ul><p><strong>三、动态生成</strong></p><ol><li>服务器端逻辑：</li></ol><ul><li>服务器可以根据特定的业务逻辑生成 ETag。例如，一个电商网站的商品页面可能根据商品的库存状态、价格变化等因素生成 ETag。</li><li>这种方式可以让服务器更灵活地控制 ETag 的生成，以满足特定的需求。</li></ul><ol><li>缓存策略考虑：</li></ol><ul><li>在生成 ETag 时，服务器可以考虑缓存策略。例如，如果服务器希望客户端在一定时间内不重新验证资源，可以生成一个较长时间内不会变化的 ETag。</li></ul><p>无论使用哪种方式生成 ETag，其目的都是为了让客户端能够有效地判断资源是否发生了变化，从而决定是否需要重新获取资源。当客户端再次请求资源时，会将上次接收到的 ETag 通过 <code>If-None-Match</code> 请求头发送给服务器，服务器比较客户端发送的 ETag 和当前资源的 ETag，如果相同，则返回 <code>304 Not Modified</code> 状态码，表示资源未发生变化，客户端可以使用缓存中的资源。</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>