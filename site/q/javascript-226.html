<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>前端动画有哪些实现方式？ - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;h3&gt;主要的实现方式&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;JS 的实现方式&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;通过定时器(&lt;code&gt;setTimeout&lt;/code&gt;, &lt;code&gt;setInterval&lt;/code&gt;)来间隔改变元素样式&lt;/li&gt;&lt;li&gt;requestAni" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="前端动画有哪些实现方式？" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;h3&gt;主要的实现方式&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;JS 的实现方式&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;通过定时器(&lt;code&gt;setTimeout&lt;/code&gt;, &lt;code&gt;setInterval&lt;/code&gt;)来间隔改变元素样式&lt;/li&gt;&lt;li&gt;requestAnimationFrame&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;CSS 3&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;过度" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/226" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>前端动画有哪些实现方式？</h1>
      <div class="subtitle">JavaScript · JavaScript · 阿里巴巴</div>
      <div class="meta">创建：2023-03-29T14:51:14Z · 更新：2023-03-29T14:51:16Z</div>
    </div>
    <article class="content markdown-body"><h3>主要的实现方式</h3><p><strong>JS 的实现方式</strong></p><ul><li>通过定时器(<code>setTimeout</code>, <code>setInterval</code>)来间隔改变元素样式</li><li>requestAnimationFrame</li></ul><p><strong>CSS 3</strong></p><ul><li>过度动画：transition</li><li>animation 动画</li></ul><p><strong>HTML 5</strong></p><ul><li>Canvas</li><li>WebGL</li><li>svg</li></ul><h3>requestAnimationFrame</h3><p><code>window.requestAnimationFrame()</code> 告诉浏览器——你希望执行一个动画，并且要求浏览器在下次重绘之前调用指定的回调函数更新动画。 该方法需要传入一个回调函数作为参数，该回调函数会在浏览器下一次重绘之前执行。</p><p>当你准备更新动画时你应该调用此方法。这将使浏览器在下一次重绘之前调用你传入给该方法的动画函数 (即你的回调函数)。回调函数执行次数通常是<strong>每秒 60 次</strong>，但在大多数遵循 W3C 建议的浏览器中，回调函数执行次数通常与浏览器屏幕刷新次数相匹配。</p><p>回调函数会被传入 <strong>DOMHighResTimeStamp</strong> 参数，<strong>DOMHighResTimeStamp</strong>指示当前被 <code>requestAnimationFrame()</code> 排序的回调函数被触发的时间。在同一个帧中的多个回调函数，它们每一个都会接受到一个相同的时间戳，即使在计算上一个回调函数的工作负载期间已经消耗了一些时间。该时间戳是一个十进制数，单位毫秒，最小精度为 1ms(1000μs)。</p><p><strong>使用语法</strong>： <code>window.requestAnimationFrame(callback);</code></p><p>参数： 下一次重绘之前更新动画帧所调用的函数 (即上面所说的回调函数)。该回调函数会被传入 <code>DOMHighResTimeStamp</code> 参数，该参数与 <code>performance.now()</code> 的返回值相同，它表示 <code>requestAnimationFrame()</code> 开始去执行回调函数的时刻。</p><p>使用示范：</p><pre class="code-block"><code class="language-html">&lt;div id=&quot;demo&quot;
     style=&quot;position: absolute;width: 100px;height: 100px;background-color: #ccc;left: 0;top: 0;&quot;&gt;
&lt;/div&gt;
&lt;script&gt;
  var demo = document.getElementById(&quot;demo&quot;);
  function reader() {
    demo.style.left = parseInt(demo.style.left) + 1 + &quot;px&quot;;// 每一帧向右移动1px
  }
  requestAnimationFrame(function() {
    reader();

    // 当超过300px 后才停止
    if (parseInt(demo.style.left) &gt; 1300) demo.style.left = 0;
    requestAnimationFrame(arguments.callee);
  });
&lt;/script&gt;
</code></pre><h3>transition</h3><p>|属性名|说明|</p><p>|---|---|</p><p>|transition|用于简写设置四个过渡属性，包括：transition-property, transition-duration, transition-timing-function 和 transition-delay|</p><p>|transition-property|规定应用过渡效果的 CSS 属性的名称，多个属性用逗号分隔，如：<code>transition-property: width, height;</code>，表示在 width 和 height 发生改变时会应用过渡效果|</p><p>|transition-duration|规定过渡效果的持续时间，如：<code>transition-duration: 1s;</code>，表示过渡效果持续时间为 1 秒|</p><p>|transition-timing-function|规定过渡效果的时间曲线，即过渡效果的速度变化。常用的值包括：<code>linear</code>, <code>ease</code>, <code>ease-in</code>, <code>ease-out</code>, <code>ease-in-out</code>, <code>cubic-bezier(n,n,n,n)</code>|</p><p>|transition-delay|规定过渡效果何时开始，如：<code>transition-delay: 1s;</code>，表示在 1 秒之后开始应用过渡效果|</p><p>可以通过设置不同的 transition 属性，来实现各种各样的过渡效果。例如：</p><pre class="code-block"><code class="language-css">cssCopy codediv {
  width: 100px;
  height: 100px;
  background-color: red;
  transition: width 1s ease-in-out;
}

div:hover {
  width: 200px;
}
</code></pre><p>上述代码表示当鼠标悬停在 div 元素上时，它的宽度会从 100px 变为 200px，过渡效果会持续 1 秒，且速度曲线为缓进缓出。</p><h3>animation</h3><p>下面是 CSS3 animation 的属性表格：</p><p>|属性|描述|</p><p>|---|---|</p><p>|animation-name|规定需要绑定到选择器的 keyframe 名称。|</p><p>|animation-duration|规定动画完成一个周期所花费的秒或毫秒。|</p><p>|animation-timing-function|规定动画的速度曲线。|</p><p>|animation-delay|规定在动画开始之前的延迟。|</p><p>|animation-iteration-count|规定动画应该播放的次数。|</p><p>|animation-direction|规定是否应该轮流反向播放动画。|</p><p>|animation-fill-mode|规定当动画不播放时（当动画完成之前，或当动画被暂停时），要应用到元素的样式。|</p><p>|animation-play-state|规定动画是否正在运行或已暂停。|</p><p>|animation|是 animation 属性的一个简写属性，包含六个独立属性。|</p><p>其中，animation-name、animation-duration、animation-timing-function 是必须要指定的属性。其他属性都是可选的。通过这些属性，我们可以实现更加灵活的动画效果。</p><p>一个使用 <code>animation</code> 的例子是实现旋转动画。例如，可以创建一个带有 CSS 类名 <code>.rotate</code> 的 <code>div</code> 元素，并使用以下样式：</p><pre class="code-block"><code class="language-css">cssCopy code.rotate {
  animation: spin 2s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
</code></pre><p>这将在 <code>div</code> 元素上应用一个旋转动画，持续时间为 2 秒，并且以线性方式无限循环。在 <code>@keyframes</code> 规则中定义了旋转动画的动画过程。在 <code>from</code> 和 <code>to</code> 关键帧中，定义了元素旋转的起始和结束状态。在 <code>animation</code> 属性中，指定了动画名称、持续时间、时间函数和动画播放次数等参数。</p><h3>Canvas 实现动画</h3><p>Canvas 可以通过一帧帧的绘制来实现动画。具体来说，可以通过 <code>requestAnimationFrame</code> 方法在浏览器下一次重绘之前执行指定的回调函数来不断地更新 Canvas 上的内容，从而实现动画效果。</p><p>以下是 Canvas 实现动画的一般流程：</p><ol><li>获取 Canvas 对象和上下文对象</li></ol><p>首先，需要获取 Canvas 对象和上下文对象。</p><pre class="code-block"><code class="language-javascript">const canvas = document.getElementById(&#39;myCanvas&#39;);
const ctx = canvas.getContext(&#39;2d&#39;);
</code></pre><ol><li>设置动画帧数和初始状态</li></ol><p>为了实现动画，需要对 Canvas 进行重绘。重绘的次数由动画的帧数决定，通常设置为每秒 60 帧。</p><p>同时，还需要设置 Canvas 的初始状态，包括背景颜色、形状、大小等。</p><ol><li>定义动画函数</li></ol><p>动画函数中主要包含两个部分：更新状态和绘制图形。更新状态指更新 Canvas 上的图形的位置、大小、颜色等属性，绘制图形指将更新后的图形绘制到 Canvas 上。</p><pre class="code-block"><code class="language-javascript">function animate() {
  // 更新状态
  // ...

  // 绘制图形
  // ...
}
</code></pre><ol><li>使用 requestAnimationFrame 方法执行动画</li></ol><p>最后，可以使用 <code>requestAnimationFrame</code> 方法不断执行动画函数，从而实现动画效果。</p><pre class="code-block"><code class="language-javascript">function animate() {
  // 更新状态
  // ...

  // 绘制图形
  // ...

  // 递归调用 requestAnimationFrame 方法执行动画
  requestAnimationFrame(animate);
}

// 启动动画
requestAnimationFrame(animate);
</code></pre><p>在动画函数中更新状态和绘制图形后，调用 <code>requestAnimationFrame</code> 方法递归执行动画函数，从而实现不断更新和绘制的动画效果。</p><h3>svg 实现动画</h3><p>SVG（可缩放矢量图形）是一种使用 XML 描述 2D 图形的格式，它可以使用 CSS 和 JavaScript 进行动画操作。在 SVG 中，可以使用两种技术实现动画，分别是 SMIL（Synchronized Multimedia Integration Language）和 JavaScript。</p><p>下面举一个使用 JavaScript 实现 SVG 动画的例子。假设有一个圆形，当鼠标悬停在圆形上时，圆形会变为红色并且向右移动：</p><p>SVG 代码：</p><pre class="code-block"><code class="language-svg">&lt;svg width=&quot;200&quot; height=&quot;200&quot;&gt;
  &lt;circle id=&quot;circle&quot; cx=&quot;50&quot; cy=&quot;50&quot; r=&quot;20&quot; fill=&quot;blue&quot; /&gt;
&lt;/svg&gt;
</code></pre><p>CSS 代码：</p><pre class="code-block"><code class="language-css">#circle {
  transition: fill 0.3s ease;
}
</code></pre><p>JavaScript 代码：</p><pre class="code-block"><code class="language-js">var circle = document.getElementById(&#39;circle&#39;);

circle.addEventListener(&#39;mouseover&#39;, function() {
  circle.setAttribute(&#39;fill&#39;, &#39;red&#39;);
  circle.setAttribute(&#39;cx&#39;, &#39;70&#39;);
});
</code></pre><p>上面的代码中，通过给圆形添加 mouseover 事件监听器，当鼠标悬停在圆形上时，修改圆形的 fill 属性为红色，并将圆心的 x 坐标改为 70。由于圆形在 CSS 中定义了过渡效果，因此圆形会平滑地变为红色并向右移动。</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>