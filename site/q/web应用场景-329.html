<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>常见图片懒加载方式有哪些？【热度: 1,001】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：图片懒加载、Intersection Observer API&lt;/p&gt;&lt;p&gt;图片懒加载可以延迟图片的加载，只有当图片即将进入视口范围时才进行加载。这可以大大减轻页面的加载时间，并降低带宽消耗，提高了用户的体验。以下是一些常见的实现方" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="常见图片懒加载方式有哪些？【热度: 1,001】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：图片懒加载、Intersection Observer API&lt;/p&gt;&lt;p&gt;图片懒加载可以延迟图片的加载，只有当图片即将进入视口范围时才进行加载。这可以大大减轻页面的加载时间，并降低带宽消耗，提高了用户的体验。以下是一些常见的实现方法：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Intersection Observer API&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;code&gt;In" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/329" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>常见图片懒加载方式有哪些？【热度: 1,001】</h1>
      <div class="subtitle">web应用场景 · web应用场景</div>
      <div class="meta">创建：2023-05-04T16:36:26Z · 更新：2023-05-04T16:36:27Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：图片懒加载、Intersection Observer API</p><p>图片懒加载可以延迟图片的加载，只有当图片即将进入视口范围时才进行加载。这可以大大减轻页面的加载时间，并降低带宽消耗，提高了用户的体验。以下是一些常见的实现方法：</p><ol><li>Intersection Observer API</li></ol><p><code>Intersection Observer API</code> 是一种用于异步检查文档中元素与视口叠加程度的API。可以将其用于检测图片是否已经进入视口，并根据需要进行相应的处理。</p><pre class="code-block"><code class="language-js">let observer = new IntersectionObserver(function (entries) {
  entries.forEach(function (entry) {
    if (entry.isIntersecting) {
      const lazyImage = entry.target;
      lazyImage.src = lazyImage.dataset.src;
      observer.unobserve(lazyImage);
    }
  });
});

const lazyImages = [...document.querySelectorAll(&quot;.lazy&quot;)];
lazyImages.forEach(function (image) {
  observer.observe(image);
});
</code></pre><ol><li>自定义监听器</li></ol><p>或者，可以通过自定义监听器来实现懒加载。其中，应该避免在滚动事件处理程序中频繁进行图片加载，因为这可能会影响性能。相反，使用自定义监听器只会在滚动停止时进行图片加载。</p><pre class="code-block"><code class="language-js">function lazyLoad() {
  const images = document.querySelectorAll(&quot;.lazy&quot;);
  const scrollTop = window.pageYOffset;
  images.forEach((img) =&gt; {
    if (img.offsetTop &lt; window.innerHeight + scrollTop) {
      img.src = img.dataset.src;
      img.classList.remove(&quot;lazy&quot;);
    }
  });
}

let lazyLoadThrottleTimeout;
document.addEventListener(&quot;scroll&quot;, function () {
  if (lazyLoadThrottleTimeout) {
    clearTimeout(lazyLoadThrottleTimeout);
  }
  lazyLoadThrottleTimeout = setTimeout(lazyLoad, 20);
});
</code></pre><p>在这个例子中，我们使用了 <code>setTimeout()</code> 函数来延迟图片的加载，以避免在滚动事件的频繁触发中对性能的影响。</p><p>无论使用哪种方法，都需要为需要懒加载的图片设置占位符，并将未加载的图片路径保存在 <code>data</code> 属性中，以便在需要时进行加载。这些占位符可以是简单的 div 或样式类，用于预留图片的空间，避免页面布局的混乱。</p><pre class="code-block"><code class="language-html">&lt;!-- 占位符示例 --&gt;
&lt;div class=&quot;lazy-placeholder&quot; style=&quot;background-color: #ddd;height: 500px;&quot;&gt;&lt;/div&gt;

&lt;!-- 图片示例 --&gt;
&lt;img class=&quot;lazy&quot; data-src=&quot;path/to/image.jpg&quot; alt=&quot;预览图&quot; /&gt;
</code></pre><p>总体来说，图片懒加载是一种这很简单，但非常实用的优化技术，能够显著提高网页的性能和用户体验。</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>