<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>cookie 可以实现不同域共享吗【热度: 533】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：cookie 共享&lt;/p&gt;&lt;p&gt;通常，Cookie不能直接在不同域间共享，这源于浏览器同源策略，该策略由协议、域名和端口号共同界定“源”，只有三者完全相同才属同源，Cookie才能在其间共享。但在特定条件和技术手段下，可实现不同域间" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="cookie 可以实现不同域共享吗【热度: 533】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：cookie 共享&lt;/p&gt;&lt;p&gt;通常，Cookie不能直接在不同域间共享，这源于浏览器同源策略，该策略由协议、域名和端口号共同界定“源”，只有三者完全相同才属同源，Cookie才能在其间共享。但在特定条件和技术手段下，可实现不同域间一定程度的Cookie共享，同时，Cookie也能设置为在同主域下的子域间共享，具体如下：&lt;/p&gt;&lt;h3&gt;不同域共享Co" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/796" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>cookie 可以实现不同域共享吗【热度: 533】</h1>
      <div class="subtitle">TOP100互联网 · 网络 · TOP100互联网</div>
      <div class="meta">创建：2024-07-12T13:34:16Z · 更新：2025-02-09T15:10:07Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：cookie 共享</p><p>通常，Cookie不能直接在不同域间共享，这源于浏览器同源策略，该策略由协议、域名和端口号共同界定“源”，只有三者完全相同才属同源，Cookie才能在其间共享。但在特定条件和技术手段下，可实现不同域间一定程度的Cookie共享，同时，Cookie也能设置为在同主域下的子域间共享，具体如下：</p><h3>不同域共享Cookie</h3><ul><li><strong>跨域资源共享（CORS）</strong>：在服务端设置<code>Access-Control-Allow-Origin</code>等CORS头信息，允许特定跨域请求。但主要用于解决跨域资源请求，对Cookie共享支持有限，一般仅能共享简单、非敏感的Cookie信息，且需客户端与服务端配合。</li><li><strong>设置P3P头</strong>：P3P用于网站向用户传达隐私策略，通过在响应头设置相关信息，理论上可让浏览器允许跨域设置Cookie。不过，该方法存在兼容性问题，在现代浏览器中支持程度不一，且有安全风险。</li><li><strong>JSONP</strong>：利用<code>&lt;script&gt;</code>标签跨域特性实现跨域数据获取，可间接模拟Cookie部分功能，但并非真正的Cookie共享。</li><li><strong>跨域Cookie共享技术方案</strong>：如单点登录（SSO）系统采用OAuth、OpenID Connect等协议实现跨域身份验证与授权，在此过程中实现用户信息与相关Cookie的共享。但这需要多个域间统一配置管理，且有专门认证服务器协调。</li></ul><h3>同主域下子域共享Cookie</h3><ul><li><strong>实现原理</strong>：设置Cookie的<code>Domain</code>属性，若将其设为主域，该Cookie在主域及其所有子域都可用。例如，主域<code>example.com</code>，将Cookie的<code>Domain</code>设为<code>.example.com</code>，则在<code>sub1.example.com</code>、<code>sub2.example.com</code>等子域都能访问使用此Cookie。</li><li><strong>实现方法</strong>：</li><li><strong>服务端设置</strong>：使用各种服务器端编程语言，通过HTTP响应头设置实现。如Java中利用<code>HttpServletResponse</code>对象设置Cookie的<code>Domain</code>属性。</li><li><strong>客户端设置</strong>：浏览器端可用JavaScript设置Cookie，使其在同主域下子域共享，但受浏览器同源策略与安全限制。</li><li><strong>注意事项</strong>：</li><li><strong>安全性考量</strong>：虽方便子域交互，但存在安全风险，任一子域遭攻击，攻击者可能利用Cookie访问其他子域资源。因此，设置Cookie共享时，要保证各子域安全，避免在Cookie存储敏感信息。</li><li><strong>浏览器兼容性</strong>：多数现代浏览器支持通过设置<code>Domain</code>属性实现子域共享Cookie，但旧版本浏览器或特殊配置环境可能存在兼容性问题，实际应用需充分测试。</li></ul></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>