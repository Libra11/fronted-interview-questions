<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>eslint 是怎么做到用配置规则去检验代码异常【热度: 75】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：eslint 原理&lt;/p&gt;&lt;p&gt;ESLint 是一个用于识别和报告 JavaScript 代码中模式问题的工具，它通过配置规则来检验代码异常，下面详细介绍其工作原理和实现过程。&lt;/p&gt;&lt;h3&gt;1. 规则配置&lt;/h3&gt;&lt;p&gt;ESLin" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="eslint 是怎么做到用配置规则去检验代码异常【热度: 75】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：eslint 原理&lt;/p&gt;&lt;p&gt;ESLint 是一个用于识别和报告 JavaScript 代码中模式问题的工具，它通过配置规则来检验代码异常，下面详细介绍其工作原理和实现过程。&lt;/p&gt;&lt;h3&gt;1. 规则配置&lt;/h3&gt;&lt;p&gt;ESLint 允许用户通过配置文件来定义代码检查规则。常见的配置文件格式有 &lt;code&gt;.eslintrc.js&lt;/code&gt;、&lt;" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/1097" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>eslint 是怎么做到用配置规则去检验代码异常【热度: 75】</h1>
      <div class="subtitle">web应用场景 · web应用场景</div>
      <div class="meta">创建：2025-02-10T16:40:10Z · 更新：2025-02-10T16:40:10Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：eslint 原理</p><p>ESLint 是一个用于识别和报告 JavaScript 代码中模式问题的工具，它通过配置规则来检验代码异常，下面详细介绍其工作原理和实现过程。</p><h3>1. 规则配置</h3><p>ESLint 允许用户通过配置文件来定义代码检查规则。常见的配置文件格式有 <code>.eslintrc.js</code>、<code>.eslintrc.json</code>、<code>.eslintrc.yml</code> 等。在配置文件中，可以为不同的规则设置不同的级别，规则级别主要有以下三种：</p><ul><li><code>off</code> 或 <code>0</code>：关闭该规则。</li><li><code>warn</code> 或 <code>1</code>：开启规则，违反规则时给出警告。</li><li><code>error</code> 或 <code>2</code>：开启规则，违反规则时给出错误。</li></ul><p>以下是一个 <code>.eslintrc.js</code> 配置文件的示例：</p><pre class="code-block"><code class="language-javascript">module.exports = {
  rules: {
    // 要求使用分号结尾
    semi: [&quot;error&quot;, &quot;always&quot;],
    // 要求使用两个空格缩进
    indent: [&quot;error&quot;, 2],
  },
};
</code></pre><h3>2. 解析代码</h3><p>ESLint 使用 JavaScript 解析器（如 Espree）将 JavaScript 代码解析成抽象语法树（Abstract Syntax Tree，简称 AST）。AST 是代码的一种树形表示，它以节点的形式描述了代码的语法结构。例如，对于以下代码：</p><pre class="code-block"><code class="language-javascript">function add(a, b) {
  return a + b;
}
</code></pre><p>解析后会生成一个包含函数定义、参数、返回语句等节点的 AST。</p><h3>3. 规则检查</h3><p>ESLint 根据配置文件中的规则，遍历 AST 节点，对代码进行检查。每个规则都定义了一个或多个检查函数，这些函数会在遍历到特定类型的 AST 节点时被调用。例如，对于 <code>semi</code> 规则，当遍历到语句结束的节点时，会检查该语句是否以分号结尾。</p><p>以下是一个简单的自定义规则示例：</p><pre class="code-block"><code class="language-javascript">module.exports = {
  meta: {
    type: &quot;problem&quot;,
    docs: {
      description: &quot;Ensure that all function names start with a capital letter&quot;,
      category: &quot;Best Practices&quot;,
      recommended: true,
    },
    schema: [],
    messages: {
      functionNameShouldStartWithCapital: &quot;Function name should start with a capital letter&quot;,
    },
  },
  create(context) {
    return {
      FunctionDeclaration(node) {
        const functionName = node.id.name;
        if (functionName[0] !== functionName[0].toUpperCase()) {
          context.report({
            node,
            messageId: &quot;functionNameShouldStartWithCapital&quot;,
          });
        }
      },
    };
  },
};
</code></pre><p>在这个自定义规则中，<code>create</code> 函数返回一个对象，对象的属性名是 AST 节点类型（如 <code>FunctionDeclaration</code>），对应的属性值是一个检查函数。当遍历到函数声明节点时，会调用该检查函数，检查函数名是否以大写字母开头。</p><h3>4. 报告问题</h3><p>如果代码违反了配置的规则，ESLint 会记录问题信息，包括问题所在的文件路径、行号、列号、规则名称和错误信息等。最后，ESLint 会将这些问题信息输出到控制台，方便开发者查看和修复。</p><h3>5. 自动修复</h3><p>对于一些简单的规则违反情况，ESLint 支持自动修复功能。在配置文件中，可以为规则设置 <code>fixable</code> 属性，并在规则的检查函数中实现修复逻辑。开发者可以使用 <code>--fix</code> 选项来让 ESLint 自动修复代码中的问题。例如：</p><pre class="code-block"><code class="language-bash">eslint --fix yourfile.js
</code></pre></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>