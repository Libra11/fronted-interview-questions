<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>实现 convert 方法，把原始 list 转换成树形结构，要求尽可能降低时间复杂度 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;h3&gt;题目如下&lt;/h3&gt;&lt;p&gt;以下数据结构中，id 代表部门编号，name 是部门名称，parentId 是父部门编号，为 0 代表一级部门，现在要求实现一个 convert 方法，把原始 list 转换成树形结构，parentId 为多少就挂载在该 id 的属性&lt;/p&gt;&lt;p&gt;" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="实现 convert 方法，把原始 list 转换成树形结构，要求尽可能降低时间复杂度" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;h3&gt;题目如下&lt;/h3&gt;&lt;p&gt;以下数据结构中，id 代表部门编号，name 是部门名称，parentId 是父部门编号，为 0 代表一级部门，现在要求实现一个 convert 方法，把原始 list 转换成树形结构，parentId 为多少就挂载在该 id 的属性&lt;/p&gt;&lt;p&gt;children 数组下，结构如下：&lt;/p&gt;&lt;pre class=&quot;code-block&quot;&gt;&lt;code class=&quot;l" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/266" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>实现 convert 方法，把原始 list 转换成树形结构，要求尽可能降低时间复杂度</h1>
      <div class="subtitle">JavaScript · JavaScript</div>
      <div class="meta">创建：2023-04-08T15:55:14Z · 更新：2023-04-08T15:55:15Z</div>
    </div>
    <article class="content markdown-body"><h3>题目如下</h3><p>以下数据结构中，id 代表部门编号，name 是部门名称，parentId 是父部门编号，为 0 代表一级部门，现在要求实现一个 convert 方法，把原始 list 转换成树形结构，parentId 为多少就挂载在该 id 的属性</p><p>children 数组下，结构如下：</p><pre class="code-block"><code class="language-js">// 原始 list 如下
let list = [
  { id: 1, name: &#39;部门A&#39;, parentId: 0 },
  { id: 2, name: &#39;部门B&#39;, parentId: 0 },
  { id: 3, name: &#39;部门C&#39;, parentId: 1 },
  { id: 4, name: &#39;部门D&#39;, parentId: 1 },
  { id: 5, name: &#39;部门E&#39;, parentId: 2 },
  { id: 6, name: &#39;部门F&#39;, parentId: 3 },
  { id: 7, name: &#39;部门G&#39;, parentId: 2 },
  { id: 8, name: &#39;部门H&#39;, parentId: 4 }
];
const result = convert(list);

// 转换后的结果如下
let result = [
  {
    id: 1,
    name: &#39;部门A&#39;,
    parentId: 0,
    children: [
      {
        id: 3,
        name: &#39;部门C&#39;,
        parentId: 1,
        children: [
          {
            id: 6,
            name: &#39;部门F&#39;,
            parentId: 3
          }, {
            id: 16,
            name: &#39;部门L&#39;,
            parentId: 3
          }
        ]
      },
      {
        id: 4,
        name: &#39;部门D&#39;,
        parentId: 1,
        children: [
          {
            id: 8,
            name: &#39;部门H&#39;,
            parentId: 4
          }
        ]
      }
    ]
  },
  ···
]
;
</code></pre><h3>解法</h3><p>解法1：</p><p>大型找爹现场</p><p>时间复杂度O(n^2)</p><pre class="code-block"><code class="language-js">function convert(arr) {
  return arr.filter((child) =&gt; {
    child.children = arr.filter(item =&gt; item.parentId === child.id)
    return child.parentId === 0
  })
}

console.log(convert(list))
</code></pre><p>解法2：</p><p>先遍历出hash表O(n)</p><p>再遍历找爹O(n)</p><p>时间复杂度：O(2n)=O(n)</p><p>大型找爹现场，找到爹就把自己push到爹的房里，如果没有房间先造一个</p><pre class="code-block"><code class="language-js">function convert(arr) {
  const res = []
  const map = arr.reduce((obj, item) =&gt; (obj[item.id] = item, obj), {})
  for (let item of arr) {
    if (item.parentId === 0) {
      res.push(item)
      continue
    }
    if (map.hasOwnProperty(item.parentId)) {
      const parent = map[item.parentId]
      parent.children = parent.children || []
      parent.children.push(item)
    }
  }
  return res
}
</code></pre></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>