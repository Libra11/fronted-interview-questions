<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Performance API 主要有哪些应用场景【热度: 431】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：Performance API 应用&lt;/p&gt;&lt;p&gt;Performance API 在前端开发中有很多应用场景，以下是一些主要的方面：&lt;/p&gt;&lt;p&gt;&lt;strong&gt;一、性能监测与优化&lt;/strong&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;测量页面加" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="Performance API 主要有哪些应用场景【热度: 431】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：Performance API 应用&lt;/p&gt;&lt;p&gt;Performance API 在前端开发中有很多应用场景，以下是一些主要的方面：&lt;/p&gt;&lt;p&gt;&lt;strong&gt;一、性能监测与优化&lt;/strong&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;测量页面加载时间：&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;通过&lt;code&gt;performance.timing&lt;/code&gt;可以获取页" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/1047" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>Performance API 主要有哪些应用场景【热度: 431】</h1>
      <div class="subtitle">web应用场景 · 网络 · web应用场景</div>
      <div class="meta">创建：2024-10-30T00:35:43Z · 更新：2024-10-30T00:35:44Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：Performance API 应用</p><p>Performance API 在前端开发中有很多应用场景，以下是一些主要的方面：</p><p><strong>一、性能监测与优化</strong></p><ol><li>测量页面加载时间：</li></ol><ul><li>通过<code>performance.timing</code>可以获取页面加载过程中的各个关键时间点，如<code>navigationStart</code>（导航开始时间）、<code>domLoading</code>（开始解析 DOM 的时间）、<code>domInteractive</code>（DOM 准备就绪时间）、<code>domContentLoadedEventEnd</code>（<code>DOMContentLoaded</code>事件结束时间）、<code>loadEventEnd</code>（页面完全加载时间）等。计算这些时间点之间的差值可以得出不同阶段的加载时间，帮助开发者了解页面加载的性能瓶颈并进行优化。</li><li>例如，可以计算从导航开始到页面完全加载的时间，以评估整体加载性能。</li></ul><p>```javascript</p><p>const timing = performance.timing;</p><p>const loadTime = timing.loadEventEnd - timing.navigationStart;</p><p>console.log(<code>Page load time: ${loadTime} milliseconds.</code>);</p><p>```</p><ol><li>测量资源加载时间：</li></ol><ul><li>使用<code>performance.getEntriesByType(&#39;resource&#39;)</code>可以获取所有资源（如脚本、样式表、图片等）的加载性能信息。可以分析每个资源的加载时间、发起请求的时间、响应时间等，以便优化资源的加载策略。</li><li>例如，可以找出加载时间较长的资源并考虑优化其大小、压缩方式或加载时机。</li></ul><p>```javascript</p><p>const resources = performance.getEntriesByType("resource");</p><p>for (const resource of resources) {</p><p>console.log(<code>Resource ${resource.name} took ${resource.responseEnd - resource.startTime} milliseconds to load.</code>);</p><p>}</p><p>```</p><ol><li>监测网络请求耗时：</li></ol><ul><li>可以结合<code>fetch</code>或<code>XMLHttpRequest</code>与 Performance API 来测量特定网络请求的耗时。在请求发送前记录时间戳，在请求完成后再次记录时间戳并计算差值，同时可以利用 Performance API 的其他信息来进一步分析请求性能。</li><li>例如，可以统计某个 API 请求的耗时并与其他指标一起分析网络性能对应用的影响。</li></ul><p>```javascript</p><p>const startTime = performance.now();</p><p>fetch("your-api-url")</p><p>.then((response) => {</p><p>const endTime = performance.now();</p><p>const duration = endTime - startTime;</p><p>console.log(<code>API request took ${duration} milliseconds.</code>);</p><p>return response;</p><p>})</p><p>.catch((error) => {</p><p>console.error(<code>Error fetching API: ${error}</code>);</p><p>});</p><p>```</p><p><strong>二、用户体验优化</strong></p><ol><li>检测页面交互响应时间：</li></ol><ul><li>通过记录用户操作（如点击按钮、滚动页面等）的时间戳和相应的响应事件（如按钮点击后的处理完成时间、滚动事件触发后的页面更新时间等），可以测量用户交互的响应时间。这有助于确保应用在用户操作后能够及时做出反应，提高用户体验。</li><li>例如，可以在用户点击一个按钮后记录开始时间，在按钮对应的操作完成后记录结束时间，计算响应时间并进行优化。</li></ul><p>```javascript</p><p>document.getElementById("your-button").addEventListener("click", () => {</p><p>const startTime = performance.now();</p><p>// 执行按钮对应的操作</p><p>//...</p><p>const endTime = performance.now();</p><p>const responseTime = endTime - startTime;</p><p>console.log(<code>Button click response time: ${responseTime} milliseconds.</code>);</p><p>});</p><p>```</p><ol><li>分析页面卡顿和流畅度：</li></ol><ul><li>Performance API 中的<code>performance.now()</code>可以提供高精度的时间戳，通过在一定时间间隔内记录时间戳并分析时间差，可以检测页面是否出现卡顿。如果连续的时间差较大，可能表示页面出现了卡顿现象。此外，还可以结合浏览器的<code>requestAnimationFrame</code>来确保动画和交互的流畅性，通过在每一帧中执行特定的操作并测量时间，可以判断页面的流畅度是否符合预期。</li><li>例如，可以在动画循环中记录每一帧的时间戳，分析帧与帧之间的时间间隔是否稳定，以检测动画的流畅度。</li></ul><p>```javascript</p><p>let lastFrameTime = performance.now();</p><p>function animate() {</p><p>const currentTime = performance.now();</p><p>const deltaTime = currentTime - lastFrameTime;</p><p>if (deltaTime > 100) {</p><p>console.log("Possible卡顿 occurred.");</p><p>}</p><p>lastFrameTime = currentTime;</p><p>requestAnimationFrame(animate);</p><p>}</p><p>requestAnimationFrame(animate);</p><p>```</p><p><strong>三、性能分析工具开发</strong></p><ol><li>构建自定义性能分析工具：</li></ol><ul><li>利用 Performance API 提供的数据，可以开发自定义的性能分析工具，用于特定项目或团队的需求。这些工具可以收集和展示各种性能指标，提供详细的报告和分析，帮助开发者更好地理解应用的性能状况并进行针对性的优化。</li><li>例如，可以开发一个插件或工具，集成到开发环境中，实时监测页面性能并提供可视化的报告，包括加载时间、资源使用情况、网络请求耗时等。</li></ul><p>```javascript</p><p>class PerformanceAnalyzer {</p><p>constructor() {</p><p>this.measurements = [];</p><p>}</p><p>startMeasurement() {</p><p>this.startTime = performance.now();</p><p>}</p><p>endMeasurement(label) {</p><p>const endTime = performance.now();</p><p>const duration = endTime - this.startTime;</p><p>this.measurements.push({ label, duration });</p><p>}</p><p>generateReport() {</p><p>console.log("Performance Report:");</p><p>for (const measurement of this.measurements) {</p><p>console.log(<code>${measurement.label}: ${measurement.duration} milliseconds.</code>);</p><p>}</p><p>}</p><p>}</p><p>const analyzer = new PerformanceAnalyzer();</p><p>analyzer.startMeasurement();</p><p>// 执行一些操作</p><p>//...</p><p>analyzer.endMeasurement("Operation 1");</p><p>analyzer.generateReport();</p><p>```</p><ol><li>与其他性能工具集成：</li></ol><ul><li>Performance API 的数据可以与其他性能分析工具（如 Lighthouse、WebPageTest 等）结合使用，提供更全面的性能分析。可以将 Performance API 收集的数据作为输入，与这些工具的报告进行对比和分析，以获得更深入的性能洞察。</li><li>例如，可以在使用 Lighthouse 进行性能测试的同时，利用 Performance API 记录特定操作的耗时，以便更细致地分析应用在不同方面的性能表现。</li></ul></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>