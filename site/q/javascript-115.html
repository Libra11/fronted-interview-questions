<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Proxy 和 Object.defineProperty 的区别是啥？ - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;code&gt;Proxy&lt;/code&gt; 和 &lt;code&gt;Object.defineProperty&lt;/code&gt; 是 JavaScript 中两个不同的特性，它们的作用也不完全相同。&lt;/p&gt;&lt;p&gt;&lt;code&gt;Object.defineProperty&lt;/code&gt; 允许你在一" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="Proxy 和 Object.defineProperty 的区别是啥？" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;code&gt;Proxy&lt;/code&gt; 和 &lt;code&gt;Object.defineProperty&lt;/code&gt; 是 JavaScript 中两个不同的特性，它们的作用也不完全相同。&lt;/p&gt;&lt;p&gt;&lt;code&gt;Object.defineProperty&lt;/code&gt; 允许你在一个对象上定义一个新属性或者修改一个已有属性。通过这个方法你可以精确地定义属性的特征，比如它是否可写、可枚举、可配置等。该" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/115" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>Proxy 和 Object.defineProperty 的区别是啥？</h1>
      <div class="subtitle">JavaScript · JavaScript</div>
      <div class="meta">创建：2023-03-15T15:15:55Z · 更新：2023-08-20T07:42:35Z</div>
    </div>
    <article class="content markdown-body"><p><code>Proxy</code> 和 <code>Object.defineProperty</code> 是 JavaScript 中两个不同的特性，它们的作用也不完全相同。</p><p><code>Object.defineProperty</code> 允许你在一个对象上定义一个新属性或者修改一个已有属性。通过这个方法你可以精确地定义属性的特征，比如它是否可写、可枚举、可配置等。该方法的使用场景通常是需要在一个对象上创建一个属性，然后控制这个属性的行为。</p><p><code>Proxy</code> 也可以用来代理一个对象，但是相比于 <code>Object.defineProperty</code>，它提供了更加强大的功能。使用 <code>Proxy</code> 可以截获并重定义对象的基本操作，比如访问属性、赋值、函数调用等等。在这些操作被执行之前，可以通过拦截器函数对这些操作进行拦截和修改。因此，通过 <code>Proxy</code>，你可以完全重写一个对象的默认行为。该方法的使用场景通常是需要对一个对象的行为进行定制化，或者需要在对象上添加额外的功能。</p><p><strong>对比</strong></p><p>以下是 Proxy 和 Object.defineProperty 的一些区别对比：</p><p>| 方面       | Proxy                                                  | Object.defineProperty                                |</p><p>|----------|--------------------------------------------------------|-------------------------------------------------------|</p><p>| 语法       | 使用 <code>new Proxy(target, handler)</code> 创建代理对象                       | 直接在对象上使用 <code>Object.defineProperty(obj, prop, descriptor)</code> |</p><p>| 监听属性变化   | 支持监听整个对象的变化，通过 <code>get</code> 和 <code>set</code> 方法拦截           | 只能监听单个属性的变化，通过 <code>get</code> 和 <code>set</code> 方法拦截           |</p><p>| 功能拦截     | 可以拦截并重写多种操作，如 <code>get</code>、<code>set</code>、<code>deleteProperty</code> 等  | 只能拦截属性的读取和赋值操作                                 |</p><p>| 可迭代性     | 支持迭代器，可以使用 <code>for...of</code>、<code>Array.from()</code> 等进行迭代     | 不支持迭代器，无法直接进行迭代操作                              |</p><p>| 兼容性      | 部分浏览器不支持，如 IE                                   | 相对较好的兼容性，支持大多数现代浏览器                          |</p><p>| 性能       | 相对较低，因为每次操作都需要经过代理                       | 相对较高，因为直接在对象上进行操作                            |</p><p>| 扩展性      | 可以通过添加自定义的 handler 方法进行扩展                      | 不支持扩展，只能使用内置的 <code>get</code> 和 <code>set</code> 方法拦截                  |</p><p>需要注意的是，Proxy 和 Object.defineProperty 在功能和用法上存在一些差异，选择使用哪个取决于具体的需求和兼容性要求。</p><p>总结来说，<code>Object.defineProperty</code> 是用来定义对象的属性，而 <code>Proxy</code> 则是用来代理对象并对其进行操作拦截和修改。两者的应用场景不同，但都可以用来对对象的行为进行定制化。</p><p><strong>性能差异</strong></p><p>在性能方面，Proxy和Object.defineProperty存在一些差异。</p><p>Proxy的性能通常较Object.defineProperty要慢。这是因为Proxy代理了整个对象，每个对属性的访问都需要经过代理的拦截器。这会导致Proxy的操作相对较慢，特别是在频繁访问属性的情况下。</p><p>相比之下，Object.defineProperty仅拦截单个属性的读取和赋值操作，不会对整个对象进行代理。因此，在性能方面，Object.defineProperty通常比Proxy更高效。</p><p>然而，性能差异在实际应用中可能并不明显，并且会受到具体的应用场景和浏览器的影响。对于大多数情况，性能差异不是决定使用哪个的主要因素。相反，功能需求和兼容性更可能影响选择Proxy或Object.defineProperty。</p><p><strong>以下是 <code>Proxy</code> 和 <code>Object.defineProperty</code> 的一些具体应用场景的不同</strong>：</p><ol><li><code>Object.defineProperty</code> 适用于需要精确地控制对象属性行为的场景，比如控制属性是否可写、可枚举、可配置等。它的应用场景包括但不限于：</li></ol><ul><li>对象属性访问权限控制；</li><li>对象属性计算；</li><li>对象属性懒加载。</li></ul><ol><li><code>Proxy</code> 适用于需要代理对象并对其进行操作拦截和修改的场景。它的应用场景包括但不限于：</li></ol><ul><li>对象属性访问控制；</li><li>对象属性修改控制；</li><li>对象属性缓存；</li><li>对象属性计算；</li><li>对象属性监听；</li><li>对象属性校验；</li><li>对象属性劫持等。</li></ul><p>总的来说，<code>Object.defineProperty</code> 主要用于单个对象属性的控制和修改，而 <code>Proxy</code> 则适用于对整个对象或对象的多个属性进行控制和修改。由于 <code>Proxy</code> 的功能更加强大，它在一些高级应用场景中比 <code>Object.defineProperty</code> 更加适用。但是在一些简单场景下，使用 <code>Object.defineProperty</code> 可能更加方便和实用。</p></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>