<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>is 作用是什么【热度: 458】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：is 谓词语法、is 语法作用&lt;/p&gt;&lt;p&gt;在 TypeScript 中，&lt;code&gt;is&lt;/code&gt; 是一种类型谓词（type predicate）语法。它用于在运行时对一个值的类型进行检查，并返回一个布尔值。&lt;/p&gt;&lt;p&gt;&lt;c" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="is 作用是什么【热度: 458】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：is 谓词语法、is 语法作用&lt;/p&gt;&lt;p&gt;在 TypeScript 中，&lt;code&gt;is&lt;/code&gt; 是一种类型谓词（type predicate）语法。它用于在运行时对一个值的类型进行检查，并返回一个布尔值。&lt;/p&gt;&lt;p&gt;&lt;code&gt;is&lt;/code&gt; 通常与条件类型和类型保护（type guards）一起使用。条件类型可以基于类型谓词 &lt;co" />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/511" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>is 作用是什么【热度: 458】</h1>
      <div class="subtitle">TypeScript · TypeScript</div>
      <div class="meta">创建：2023-08-03T16:16:44Z · 更新：2023-08-03T16:27:20Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：is 谓词语法、is 语法作用</p><p>在 TypeScript 中，<code>is</code> 是一种类型谓词（type predicate）语法。它用于在运行时对一个值的类型进行检查，并返回一个布尔值。</p><p><code>is</code> 通常与条件类型和类型保护（type guards）一起使用。条件类型可以基于类型谓词 <code>is</code> 的结果来进行类型细化，从而在编译时获取更准确的类型推断。</p><p>以下是一个示例，展示了如何使用 <code>is</code> 进行类型谓词检查：</p><pre class="code-block"><code class="language-typescript">function isString(value: unknown): value is string {
  return typeof value === &#39;string&#39;;
}

function processValue(value: unknown): void {
  if (isString(value)) {
    console.log(value.toUpperCase());
  } else {
    console.log(&#39;Value is not a string.&#39;);
  }
}

processValue(&#39;hello&#39;); // 输出: HELLO
processValue(42); // 输出: Value is not a string.
</code></pre><p>在上述示例中，我们定义了一个 <code>isString</code> 函数，它接受一个 <code>unknown</code> 类型的值，并使用 <code>typeof</code> 运算符检查该值是否为字符串类型。函数返回一个布尔值，指示值是否为字符串类型。</p><p>然后，我们定义了一个 <code>processValue</code> 函数，它接受一个 <code>unknown</code> 类型的值，并通过调用 <code>isString</code> 函数进行类型谓词检查。如果值是字符串类型，就将其转换为大写并打印出来；否则，打印出值不是字符串类型的消息。</p><p>最后，我们调用 <code>processValue</code> 函数两次，一次传入字符串 <code>&#39;hello&#39;</code>，一次传入数值 <code>42</code>。第一次调用输出 <code>HELLO</code>，表示字符串类型的值通过了类型谓词检查；第二次调用输出 <code>Value is not a string.</code>，表示数值类型的值未通过类型谓词检查。</p><p>因此，<code>is</code> 是 TypeScript 中用于类型谓词检查的关键字，用于在运行时对一个值的类型进行判断，并返回一个布尔值。</p><h2>Comments / Answers</h2><hr /><p><strong>yanlele</strong> at 2023-08-03T16:27:20Z</p><p><strong>补充</strong></p><p>is 关键字用在函数的返回值上，用来表示对于函数返回值的类型保护。</p><pre class="code-block"><code class="language-typescript">function isString (value) {
  return Object.prototype.toString.call(value) === &#39;[object String]&#39;
}

function fn (x: string | number) {
  if (isString(x)) {
    return x.length // error 类型“string | number”上不存在属性“length”。
  } else {
    // .....
  }
}

// =&gt;
function isString (value: unknown): value is string {
  return Object.prototype.toString.call(value) === &#39;[object String]&#39;
}

function fn (x: string | number) {
  if (isString(x)) {
    return x.length
  } else {
    // .....
  }
}
</code></pre><p>上面的例子还不明显，毕竟是因为ts解析器对Object.prototype.toString没有实现类型推断，我们要是用 <code>typeof x === &#39;string&#39;</code>，利用typeof具有类型推断的能力一样达到效果</p><p>但总有些类型是不能依靠typeof的能力的，譬如朋友提出的这个：</p><pre class="code-block"><code class="language-typescript">interface TA {
  a: number
}

interface TB {
  b: number;
}

function cookTest(val: TA | TB) {
  if (val.a) { // error: Property &#39;a&#39; does not exist on type &#39;TA | TB&#39;.
  }
}
</code></pre><p>这时候is就可以用起来了：</p><pre class="code-block"><code class="language-typescript">interface TA {
  a: number
}

interface TB {
  b: number;
}

function getA(params: TA | TB): params is TA {
  return &quot;a&quot; in params;
}

function cookTest(val: TA | TB) {
  const a = getA(val) ? val.a : &#39;&#39;; // 安全
}
</code></pre></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>