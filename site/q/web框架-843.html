<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>[vue] scope 是怎么做的样式隔离的【热度: 126】 - 面试题刷题</title>
  <link rel="stylesheet" href="../assets/styles.css" />
  <meta name="description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：vue 样式个例&lt;/p&gt;&lt;p&gt;Vue 中的样式隔离是通过 Vue 单文件组件（Single File Components，简称 SFC）的 &lt;code&gt;&amp;lt;style&amp;gt;&lt;/code&gt; 标签中的 &lt;code&gt;scoped&lt;" />
  <link rel="icon" href="../assets/favicon.svg" />
  <style>.content a{color:var(--brand);} .content img{max-width:100%;}</style>
  
  <!-- Open Graph -->
  <meta property="og:title" content="[vue] scope 是怎么做的样式隔离的【热度: 126】" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="&lt;p&gt;&lt;strong&gt;关键词&lt;/strong&gt;：vue 样式个例&lt;/p&gt;&lt;p&gt;Vue 中的样式隔离是通过 Vue 单文件组件（Single File Components，简称 SFC）的 &lt;code&gt;&amp;lt;style&amp;gt;&lt;/code&gt; 标签中的 &lt;code&gt;scoped&lt;/code&gt; 属性实现的。当你在一个 Vue 组件的 &lt;code&gt;&amp;lt;style&amp;gt;&lt;/code&gt; 标签上添加 " />
  <meta property="og:locale" content="zh_CN" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="../index.html">面试题刷题</a>
      <nav class="nav">
        <a href="../index.html">首页</a>
        <a href="../index.html#categories">分类</a>
        <a href="https://github.com/pro-collection/interview-question/issues/843" target="_blank" rel="noopener">原始链接</a>
      </nav>
    </div>
  </header>
  <main class="container article">
    <div class="article-head">
      <a class="back" href="../index.html">← 返回列表</a>
      <h1>[vue] scope 是怎么做的样式隔离的【热度: 126】</h1>
      <div class="subtitle">web框架 · web框架 · 京东</div>
      <div class="meta">创建：2024-08-18T07:11:18Z · 更新：2024-08-18T07:11:18Z</div>
    </div>
    <article class="content markdown-body"><p><strong>关键词</strong>：vue 样式个例</p><p>Vue 中的样式隔离是通过 Vue 单文件组件（Single File Components，简称 SFC）的 <code>&lt;style&gt;</code> 标签中的 <code>scoped</code> 属性实现的。当你在一个 Vue 组件的 <code>&lt;style&gt;</code> 标签上添加 <code>scoped</code> 属性时，Vue 会自动将该样式限定在当前组件的范围内，从而防止样式冲突和不必要的样式泄漏。</p><h3>实现原理</h3><p>Vue 在编译带有 <code>scoped</code> 属性的 <code>&lt;style&gt;</code> 标签时，会按照以下步骤处理样式隔离：</p><ol><li><strong>生成唯一的作用域 ID</strong>：Vue 为每个带有 <code>scoped</code> 属性的组件生成一个唯一的作用域 ID（如 <code>data-v-f3f3eg9</code>）。这个 ID 是随机的，确保每个组件的作用域 ID 是独一无二的。</li></ol><ol><li><strong>添加作用域 ID 到模板元素</strong>：Vue 会在编译组件模板的过程中，将这个作用域 ID 作为自定义属性添加到组件模板的所有元素上。例如，如果作用域 ID 是 <code>data-v-f3f3eg9</code>，那么在该组件模板的所有元素上都会添加一个属性 <code>data-v-f3f3eg9</code>。</li></ol><ol><li><strong>修改 CSS 选择器</strong>：对于组件内部的每个 CSS 规则，Vue 会自动转换其选择器，使其仅匹配带有对应作用域 ID 的元素。这是通过在 CSS 选择器的末尾添加相应的作用域 ID 属性选择器来实现的。例如，如果 CSS 规则是 <code>.button { color: red; }</code>，并且作用域 ID 是 <code>data-v-f3f3eg9</code>，那么该规则会被转换成 <code>.button[data-v-f3f3eg9] { color: red; }</code>。</li></ol><h3>示例</h3><p>假设有如下 Vue 单文件组件：</p><pre class="code-block"><code class="language-vue">&lt;template&gt;
  &lt;button class=&quot;btn&quot;&gt;Click Me&lt;/button&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.btn {
  background-color: red;
}
&lt;/style&gt;
</code></pre><p>编译后，CSS 规则会变成类似于这样（注意：实际的作用域 ID 是随机生成的）：</p><pre class="code-block"><code class="language-css">.btn[data-v-f3f3eg9] {
  background-color: red;
}
</code></pre><p>并且模板里的 <code>&lt;button&gt;</code> 元素会被编译为类似这样：</p><pre class="code-block"><code class="language-html">&lt;button class=&quot;btn&quot; data-v-f3f3eg9&gt;Click Me&lt;/button&gt;
</code></pre><p>这样，<code>.btn</code> 样式规则只会应用到当前组件中的 <code>&lt;button&gt;</code> 元素上，而不会影响到其他组件中的同类元素，实现了样式隔离。</p><h3>注意事项</h3><ul><li>由于样式隔离是通过属性选择器和自定义属性实现的，因此这种方法的性能可能会略低于全局样式规则。</li><li><code>scoped</code> 样式不能影响子组件，仅限于当前的组件。如果需要影响子组件，则需要使用深度选择器（<code>&gt;&gt;&gt;</code> 或 <code>/deep/</code>）。</li><li>其他 Web 组件技术如 Shadow DOM 也可以提供样式隔离的功能，但 Vue 选择了这种不需要 polyfill、兼容性更好的实现方式。</li></ul></article>
  </main>
  <footer class="site-footer">© 面试题刷题 · 由本地静态页面生成</footer>
</body>
</html>